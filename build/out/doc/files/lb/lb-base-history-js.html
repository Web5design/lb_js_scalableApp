<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>lb.base.history - The Scalable JavaScript Application</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="lb.base.history"></a>lb.<wbr>base.<wbr>history</h1><div class=CBody><p>History (in Local Navigation) Adapter Module for Base Library</p><p>This module provides support for local navigation, setting, getting and detecting changes in the hash, the local part of the url.</p><p>The module must be loaded in a static way, e.g. part of an external script included at the end of the &lt;body&gt;.&nbsp; During its loading, it will initialize the history manager, which must be done before the page &ldquo;load&rdquo; event.&nbsp; Loading this module dynamically after the page &ldquo;load&rdquo; may result in the page being reset to blank.</p><p>The module requires two elements to be present in the initial document, an iframe of id &lsquo;lb.base.history.iframe&rsquo; (in Internet Explorer) and a hidden input field of id &lsquo;lb.base.history.input&rsquo; (in all browsers, including IE).&nbsp; In case these elements are not found, they will be created during the module initialization using document.write.</p><p>The two elements should be hidden.&nbsp; The source of the iframe can be any resource on the same from the same domain as the document [1].&nbsp; We advise to set it to the location of the favicon, which has been loaded already and will not cost another roundtrip.&nbsp; The iframe is only needed in IE [2], and can be created within a conditional comment to spare its creation cost in other browsers:</p><blockquote><pre>&lt;!--[if IE]&gt;
  &lt;iframe id=&quot;lb.base.history.iframe&quot; src=&quot;favicon.ico&quot; class=&quot;hidden&quot;
  &gt;&lt;/iframe&gt;
&lt;![endif]--&gt;
&lt;input id=&quot;lb.base.history.input&quot; type=&quot;hidden&quot; /&gt;</pre></blockquote><p>The following CSS can be used to hide the iframe (in IE)</p><blockquote><pre>iframe.hidden {
  position: absolute;
  top: 0;
  left: 0;
  width: 1px;
  height: 1px;
  visibility: hidden;
}</pre></blockquote><p>When the iframe is not present in the document, its src attribute location is set to the expected location of the favicon:</p><ul><li>either configured in a link part of the page &lt;head&gt;:</li></ul><blockquote><pre>&lt;link rel='shortcut icon' href='favicon.ico' /&gt;</pre></blockquote><ul><li>or by default &lsquo;/favicon.ico&rsquo;, at the root of the web site.</li></ul><h4 class=CHeading>Warning</h4><p>In case the resource referenced by the iframe src is missing, e.g. because the iframe was not present in the document and no favicon is present at the root of the web server, &ldquo;Access is denied&rdquo; errors may happen at random in IE when the page is refreshed and setToken() is called to set a new hash.</p><h4 class=CHeading>References</h4><ul><li>[1] YUI 2: Browser History Manager <a href="http://developer.yahoo.com/yui/history/" class=LURL target=_top>http://developer.yahoo.com/yui/history/</a></li><li>[2] History - Closure Library API Documentation <a href="http://closure-library.googlecode.com/svn/docs/class_goog_History.html" class=LURL target=_top>http://closure-library.googlecode.com<wbr>/svn<wbr>/docs<wbr>/class_goog_History.html</a></li><li>[3] How to Add a Shortcut Icon to a Web Page <a href="http://msdn.microsoft.com/en-us/library/ms537656%28VS.85%29.aspx" class=LURL target=_top>http://msdn.microsoft.com<wbr>/en-us<wbr>/library<wbr>/ms537656%28VS.85%29.aspx</a></li></ul><h4 class=CHeading>Authors</h4><ul><li>Eric Bréchemier <a href="#" onClick="location.href='mai' + 'lto:' + 'git' + 'hub' + '@' + 'eric.brech' + 'emier.name'; return false;" class=LEMail>git<span style="display: none">.nosp@m.</span>hub<span>@</span>eric.brech<span style="display: none">.nosp@m.</span>emier.name</a></li><li>Marc Delhommeau <a href="#" onClick="location.href='mai' + 'lto:' + 'marc.de' + 'lhommeau' + '@' + 'legalb' + 'ox.com'; return false;" class=LEMail>marc.de<span style="display: none">.nosp@m.</span>lhommeau<span>@</span>legalb<span style="display: none">.nosp@m.</span>ox.com</a></li></ul><h4 class=CHeading>Copyright</h4><p>Eric Bréchemier &copy; 2011, Some Rights Reserved Legal-Box SAS &copy; 2010-2011, All Rights Reserved</p><h4 class=CHeading>License</h4><p>BSD License <a href="http://creativecommons.org/licenses/BSD/" class=LURL target=_top>http://creativecommons.org/licenses/BSD/</a></p><h4 class=CHeading>Version</h4><p>2011-08-14</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#lb.base.history" >lb.<wbr>base.<wbr>history</a></td><td class=SDescription>History (in Local Navigation) Adapter Module for Base Library</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#lb.base.history.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#lb.base.history.getFaviconUrl():string" >getFaviconUrl(): string</a></td><td class=SDescription>Get the expected url of the shortcut icon.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#lb.base.history.getHash():string" >getHash(): string</a></td><td class=SDescription>Get the hash part of current url.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#lb.base.history.setHash(hash)" >setHash(hash)</a></td><td class=SDescription>Set a hash part in current url.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#lb.base.history.addListener(callback)" >addListener(callback)</a></td><td class=SDescription>Register a callback for modifications of the hash.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#lb.base.history.removeListener(callback)" >removeListener(callback)</a></td><td class=SDescription>Unregister a callback for hash modifications.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#lb.base.history.destroy" >destroy()</a></td><td class=SDescription>Terminate the history manager.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.getFaviconUrl():string"></a>getFaviconUrl(): string</h3><div class=CBody><p>Get the expected url of the shortcut icon.</p><h4 class=CHeading>Returns</h4><ul><li>string, the href of the first link with rel &lsquo;shortcut icon&rsquo; (case-insensitive) found in the &lt;head&gt;,</li><li>or &lsquo;/favicon.ico&rsquo; by default</li></ul><h4 class=CHeading>Reference</h4><p>[1] How to Add a Shortcut Icon to a Web Page <a href="http://msdn.microsoft.com/en-us/library/ms537656%28VS.85%29.aspx" class=LURL target=_top>http://msdn.microsoft.com<wbr>/en-us<wbr>/library<wbr>/ms537656%28VS.85%29.aspx</a></p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.getHash():string"></a>getHash(): string</h3><div class=CBody><p>Get the hash part of current url.</p><h4 class=CHeading>Returns</h4><ul><li>string, the url-decoded value of the current hash</li><li>null when the history manager has been destroyed</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.setHash(hash)"></a>setHash(hash)</h3><div class=CBody><p>Set a hash part in current url.</p><h4 class=CHeading>Note</h4><p>The hash will be encoded in this function.</p><h4 class=CHeading>Param</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>hash</td><td class=CDLDescription>string, the new hash part to set, with or without the initial hash sign, e.g.&nbsp; &lsquo;new-hash&rsquo;, &lsquo;#new-hash&rsquo; or &lsquo;#new hash&rsquo;</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.addListener(callback)"></a>addListener(callback)</h3><div class=CBody><p>Register a callback for modifications of the hash.</p><h4 class=CHeading>Parameter</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>callback</td><td class=CDLDescription>function, a function callback(hash), which will be called for each subsequent change of hash.&nbsp; The new hash, decoded and starting with &lsquo;#&rsquo;, will be provided as parameter.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.removeListener(callback)"></a>removeListener(callback)</h3><div class=CBody><p>Unregister a callback for hash modifications.</p><h4 class=CHeading>Parameter</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>callback</td><td class=CDLDescription>function, a callback previously set to addListener().</td></tr></table><h4 class=CHeading>Note</h4><p>Nothing happens when the callback has never been added, or has been removed already.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="lb.base.history.destroy"></a>destroy()</h3><div class=CBody><p>Terminate the history manager.</p></div></div></div>

</div><!--Content-->


<div id=Footer>Eric Bréchemier &copy; 2011 &mdash; Legal-Box SAS &copy; 2010-2011&nbsp; &middot;&nbsp; 2013-09-10&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>The Scalable JavaScript Application</div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Sandbox API</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MText>sandboxed API, for use in your modules</div></div><div class=MEntry><div class=MFile><a href="lb-core-Sandbox-js.html">lb.<wbr>core.<wbr>Sandbox</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-css-js.html">lb.<wbr>core.<wbr>plugins.css</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-dom-js.html">lb.<wbr>core.<wbr>plugins.dom</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-events-js.html">lb.<wbr>core.<wbr>plugins.<wbr>events</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-i18n-js.html">lb.<wbr>core.<wbr>plugins.i18n</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-server-js.html">lb.<wbr>core.<wbr>plugins.<wbr>server</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-url-js.html">lb.<wbr>core.<wbr>plugins.url</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-utils-js.html">lb.<wbr>core.<wbr>plugins.<wbr>utils</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Core API</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MText>public API, for use in your applications to create and manage modules</div></div><div class=MEntry><div class=MFile><a href="lb-core-application-js.html">lb.<wbr>core.<wbr>application</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-events-publisher-js.html">lb.<wbr>core.<wbr>events.<wbr>publisher</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-events-Subscriber-js.html">lb.<wbr>core.<wbr>events.<wbr>Subscriber</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-Module-js.html">lb.<wbr>core.<wbr>Module</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-builder-js.html">lb.<wbr>core.<wbr>plugins.<wbr>builder</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Base API</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MText>private API, an adaptation layer on top of the cross-browser library, for use in the core</div></div><div class=MEntry><div class=MFile><a href="lb-base-js.html">lb.base</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-ajax-js.html">lb.<wbr>base.ajax</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-array-js.html">lb.<wbr>base.<wbr>array</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-config-js.html">lb.<wbr>base.<wbr>config</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-dom-js.html">lb.<wbr>base.dom</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-dom-css-js.html">lb.<wbr>base.<wbr>dom.css</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-dom-factory-js.html">lb.<wbr>base.<wbr>dom.<wbr>factory</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-dom-Listener-js.html">lb.<wbr>base.<wbr>dom.<wbr>Listener</a></div></div><div class=MEntry><div class=MFile id=MSelected>lb.<wbr>base.<wbr>history</div></div><div class=MEntry><div class=MFile><a href="lb-base-i18n-js.html">lb.<wbr>base.i18n</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-i18n-data-js.html">lb.<wbr>base.<wbr>i18n.data</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-json-js.html">lb.<wbr>base.json</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-log-js.html">lb.<wbr>base.log</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-object-js.html">lb.<wbr>base.<wbr>object</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-string-js.html">lb.<wbr>base.<wbr>string</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-template-js.html">lb.<wbr>base.<wbr>template</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-template-html-js.html">lb.<wbr>base.<wbr>template.html</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-template-i18n-js.html">lb.<wbr>base.<wbr>template.i18n</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-template-string-js.html">lb.<wbr>base.<wbr>template.<wbr>string</a></div></div><div class=MEntry><div class=MFile><a href="lb-base-type-js.html">lb.<wbr>base.type</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">Namespaces</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MText>empty modules defining a namespace</div></div><div class=MEntry><div class=MFile><a href="lb-js.html">lb</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-js.html">lb.core</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-events-js.html">lb.<wbr>core.<wbr>events</a></div></div><div class=MEntry><div class=MFile><a href="lb-core-plugins-js.html">lb.<wbr>core.<wbr>plugins</a></div></div><div class=MEntry><div class=MFile><a href="lb-data-js.html">lb.data</a></div></div><div class=MEntry><div class=MFile><a href="lb-ui-js.html">lb.ui</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Module Loader</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MText>null implementation of CommonJS Asynchronous Module Definition for optimized code</div></div><div class=MEntry><div class=MFile><a href="../amd/define-js.html">amd/<wbr>define</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent6')">Index</a><div class=MGroupContent id=MGroupContent6><div class=MEntry><div class=MIndex><a href="../../index/General.html">All</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Classes.html">Modules</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Functions.html">Methods</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Functions">Functions</option></select></div><script language=JavaScript><!--
HideAllBut([3], 7);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>